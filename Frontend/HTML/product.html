<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title></title>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <link rel="stylesheet" href="Frontend/CSS/product_style.css">
</head>

<body>
    <div class="container">
        <a href="#" onclick="window.history.back(); return false;" class="btn btn-link">
            <i class="fas fa-arrow-left"></i>
            Back
        </a>
        <div id="product-card" class="product-card" style="display:none;"></div>
        <div id="history-card" class="card"
            style="display:flex; flex-direction:column; position: relative; width: 150%; right: 25%;">
            <div class="card-header">
                <span style="display:flex;align-items:center;gap:0.7em;">
                    <i class="fas fa-history"></i> Price history
                </span>
                <div style="display:flex;align-items:center;">
                    <div id="toggle-history-switch" class="history-toggle-switch tabel" title="Toggle table/chart">
                        <span class="history-toggle-icon icon-tabel"><i class="fas fa-table"></i></span>
                        <span class="history-toggle-icon icon-grafic"><i class="fas fa-chart-line"></i></span>
                        <span class="history-toggle-knob"><i class="fas fa-table"></i></span>
                    </div>
                </div>
            </div>
            <div class="card-body p-0" id="history-table-container"></div>
            <div id="history-footer" class="history-footer" style="display:none;">
                <div>
                    Total: <strong id="history-total"></strong> records
                </div>
                <div id="history-pagination" class="history-pagination" style="display:none;"></div>
            </div>
            <div id="history-chart-container" style="width:94%;padding:1.5rem 1.5rem 1.5rem 1.5rem;display:none;">
                <canvas id="priceChart" style="width:100%;max-width:100%;height:220px;display:block;"></canvas>
            </div>
        </div>
    </div>
    <div id="delete-product-modal"
        style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3); z-index:3000;">
        <div style="
                background:white;
                max-width:300px;
                margin:120px auto;
                padding:2rem 1.5rem;
                border-radius:15px;
                box-shadow:0 8px 32px rgba(0,0,0,0.18);
                position:relative;
                ">
            <h3 style="margin-bottom:1rem; margin-top: 0rem; color:var(--danger); font-size:1.1rem;">Delete product
            </h3>
            <div style="margin-bottom:1.2rem; color:var(--secondary); font-size:1rem;">
                Are you sure you want to delete this product?<br>
                <b>This action is irreversible!</b>
            </div>
            <div style="display:flex; justify-content:flex-end; gap:0.5rem;">
                <button type="button" class="btn btn-secondary" id="delete-product-cancel"
                    style="padding:0.75rem 1.5rem;font-size:0.9rem;">Cancel</button>
                <button type="button" class="btn btn-danger" id="delete-product-confirm"
                    style="padding:0.75rem 1.5rem;font-size:0.9rem;">Delete</button>
            </div>
            <button id="delete-product-close"
                style="position:absolute; top:10px; right:10px; background:none; border:none; font-size:1.5rem; color:#64748b; cursor:pointer;">&times;</button>
        </div>
    </div>
    <div id="alert-success" class="alert success"
        style="display:none;align-items:center;gap:0.5rem;padding:1rem 1.5rem;border-radius:10px;margin-bottom:1rem;">
        <i class="fas fa-check-circle"></i>
        <span id="success-message"></span>
    </div>
    <div id="alert-error" class="alert error"
        style="display:none;align-items:center;gap:0.5rem;padding:1rem 1.5rem;border-radius:10px;margin-bottom:1rem;">
        <i class="fas fa-exclamation-circle"></i>
        <span id="error-message"></span>
    </div>
    <div id="scheduler-modal"
        style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.3); z-index:4000;">
        <div style="
                background:white;
                max-width:400px;
                margin:40px auto;
                padding:2rem 2rem 1.5rem 2rem;
                border-radius:15px;
                box-shadow:0 8px 32px rgba(0,0,0,0.15);
                position:relative;
                padding-top: 1.5rem;
                font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
                border: 1px solid #e2e8f0;
                ">
            <h2
                style="margin-bottom:1rem; font-size:1.25rem; color:var(--primary); font-weight:700; padding-top: 0; margin-top: 15px;">
                Set price notification</h2>
            <form id="scheduler-form">
                <div style="margin-bottom:1.2rem;">
                    <label for="notify-price"
                        style="font-weight:600; color:var(--secondary); font-size:0.98rem; margin-bottom:0.4em; display:block;">Maximum notification price:</label>
                    <input type="number" min="1" step="1" id="notify-price" name="notify_price" class="form-input"
                        style="width:100%;padding:0.75rem 1rem;border:2px solid var(--border);border-radius:10px;outline:none;transition:all 0.3s;background:white;font-size:1.05em;box-sizing:border-box;">
                </div>
                <div style="color:var(--secondary); font-size:1rem; margin-bottom:1rem;">
                    You will receive a Discord notification when the product price drops below this amount.
                </div>
                <div style="display:flex; align-items:center; justify-content:flex-end; gap:0.5rem; font-weight: 600;">
                    <button type="button" class="btn btn-secondary" id="scheduler-cancel"
                        style="padding:0.75rem 1.5rem;font-size:0.9rem;"
                        onclick="closeSchedulerModal()">Cancel</button>
                    <button type="submit" class="btn btn-primary btn-schendulePrice-success"
                        style="padding:0.75rem 1.5rem;font-size:0.9rem; color:white; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1);">Save</button>
                </div>
            </form>
            <button id="scheduler-close"
                style="position:absolute; top:1rem; right:1rem; background:none; border:none; font-size:1.5rem; color:#64748b; cursor:pointer;"
                onclick="closeSchedulerModal()">&times;</button>
        </div>
    </div>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.1/chart.umd.min.js"></script>
    <script src="Frontend/JS/product_backend.js"></script>
</body>

</html>